---
title: "Mini-Project 2"
author: "Your Name Here"
date: "October 31, 2017"
output: html_document
---

## Loading the data

```{r, include=FALSE}
load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")
library(tidyverse)
```

Compare:

Candidates status (incumbent or not) and contributions, winning rate, etc.

Look at states and their donations, where do most people who donate live?

Contribution amount and result of election

Looking state by state at individual elections

Compare parties: dem, rep, ind

```{r}
test2<-contributions%>%
  inner_join(house_elections, by=c("cand_id"="fec_id"))

test3<-test2%>%
  inner_join(candidates, by="cand_id")

total<-test3%>%
  group_by(cand_id, cand_name, cand_party_affiliation)%>%
  mutate(posneg=ifelse(transaction_amt>0, "positive","negative"))

total%>%
  group_by(cand_id, cand_name)%>%
  summarise(against=sum(ifelse(transaction_amt<0, n, 0)),
            support=sum(ifelse(transaction_amt>0, n, 0)))

```


Not a super interesting plot, but we could aggregate some more probably. Incumbents definitely get more money spent against them than non-incumbents. Also Republicans get more money spent against them than Dems.

```{r}
test<-house_elections%>%
  inner_join(contributions, by=c("fec_id"="cand_id"))

ggplot(test, aes(x=incumbent, y=transaction_amt))+
  geom_boxplot()

repdem<-test%>%
  filter(party=="R" | party=="D")

ggplot(repdem, aes(x=party, y=transaction_amt))+
  geom_boxplot()
```

```{r}

#Overall: The effect of campaign finance on general election outcome
#Look at effect of party, state 

```




